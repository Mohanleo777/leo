<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
</head>
<body>

    <h2>Login</h2>

    <!-- Login Form -->
    <form id="loginForm" onsubmit="handleLogin(event)">
        <input type="text" id="username" placeholder="Username" required><br>
        <input type="password" id="password" placeholder="Password" required><br>
        <button type="submit" id="loginButton">Login</button>
    </form>

    <!-- Capture Picture -->
    <div id="camera">
        <video id="video" width="320" height="240" autoplay></video>
        <button id="captureButton">Capture Picture</button>
        <canvas id="canvas" style="display: none;"></canvas>
    </div>

    <script>
        // Handle login and capture data
        function handleLogin(event) {
            event.preventDefault();

            // Capture credentials
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            // Get user location
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    const location = {
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude
                    };

                    // Log or send location, username, password
                    console.log('Location:', location);
                    console.log('Credentials:', { username, password });

                    // Start capturing picture
                    startCamera();
                });
            } else {
                console.error("Geolocation is not supported by this browser.");
            }
        }

        // Start Camera for picture capture
        function startCamera() {
            const video = document.getElementById("video");
            const canvas = document.getElementById("canvas");
            const captureButton = document.getElementById("captureButton");

            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then((stream) => {
                        video.srcObject = stream;
                    })
                    .catch((err) => {
                        console.error("Error accessing camera:", err);
                    });

                captureButton.addEventListener('click', () => {
                    const context = canvas.getContext('2d');
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);
                    const imageData = canvas.toDataURL('image/png');
                    console.log('Captured Image:', imageData);

                    // Optionally, send image data to server or use it further
                });
            } else {
                console.error("Camera not supported.");
            }
        }
    </script>

</body>
</html>
